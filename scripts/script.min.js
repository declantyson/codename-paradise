/*! canvas-game 2018-02-06 */

!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=(c.fps=45,c.actionTimeoutLimit=2,c.tileSize=15),e=c.tilesWide=96,f=c.tilesHigh=54,g=c.colours={black:"#000000",white:"#FFFFFF",green:"#00AA00",blue:"#0000AA",brown:"#4f1f0b",darkbrown:"#291006",grey:"#cdcdcd",red:"#ff0000"},h=(c.directions={up:"up",down:"down",left:"left",right:"right"},c.texts={dead:"Dead"},c.fonts={large:'24px "Roboto Condensed"',small:'16px "Roboto"',death:'24px "Permanent Marker"'},c.canvasProperties={width:d*e,height:d*f,centerPoint:{x:d*e/2-d/2,y:d*f/2-d/2}});c.interactionTextArea={width:h.width,height:h.height/3,background:g.black,alpha:.4,badgeOffsetX:20,badgeOffsetY:40,lineHeight:18},c.genders={male:"M",female:"F",alien:"A"},c.pronouns={M:"him",F:"her",A:"xlem"},c.posessivePronouns={M:"his",F:"her",A:"xleir"},c.personCount=4,c.inhabitanceSize=2},{}],2:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.StartGame=void 0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./util"),h=(d(g),a("./inputs")),i=(d(h),a("./player")),j=a("./worldmap"),k=a("../constants"),l=(c.StartGame=function(a,b,c,d,e){clearInterval(window.drawScene),c=c||new i.Player,d=d||new j.WorldMap(c),e=e||new l("world",k.canvasProperties.width,k.canvasProperties.height);var f=new a(c,b),g=new m(e,d,k.canvasProperties.centerPoint);return g.scene.setCurrentLocale(f,"beginningOfGame"),g},function a(b,c,d){e(this,a),this.canvas=document.getElementById(b),this.canvas.style.width=c,this.canvas.style.height=d,this.canvas.style.display="block",this.canvas.width=c,this.canvas.height=d,this.fps=k.fps,this.ctx=this.canvas.getContext("2d")}),m=function(){function a(b,c,d){e(this,a),this.actionTimeout=k.actionTimeoutLimit,this.renderer=b,this.setScene(c),this.centerPoint=d,this.currentAction=null,this.draw()}return f(a,[{key:"draw",value:function(){var a=document.createElement("canvas"),b=a.getContext("2d");a.height=this.renderer.canvas.height,a.width=this.renderer.canvas.width,this.renderer.ctx.clearRect(0,0,this.renderer.canvas.width,this.renderer.canvas.height),this.scene.doActions(this.currentAction),this.scene.draw(b),this.renderer.ctx.drawImage(a,0,0),window.requestAnimationFrame(this.draw.bind(this))}},{key:"setScene",value:function(a){this.scene=a,this.scene.setGame(this)}},{key:"sendInput",value:function(a){this.currentAction=a}},{key:"triggerActionTimeout",value:function(){this.actionTimeoutCounterInterval=setInterval(this.actionTimeoutCounter.bind(this),1e3/this.renderer.fps)}},{key:"actionTimeoutCounter",value:function(){0===--this.actionTimeout&&(clearInterval(this.actionTimeoutCounterInterval),this.actionTimeout=k.actionTimeoutLimit)}}]),a}()},{"../constants":1,"./inputs":3,"./player":9,"./util":12,"./worldmap":13}],3:[function(a,b,c){"use strict";var d={38:"up",40:"down",37:"left",39:"right",32:"action",27:"back"};window.addEventListener("keydown",function(a){d[a.keyCode]&&window.game&&window.game.sendInput(d[a.keyCode])}),window.addEventListener("keyup",function(a){window.game&&window.game.sendInput(null)})},{}],4:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Interaction=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./util"),i=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(h),j=a("./scene"),k=a("../constants"),l=function(a){function b(a){d(this,b);var c=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.lines=[],c.person=a,c.actions.back=c.returnToWorldMap.bind(c),i.log("Entering interaction with "+c.person.name),c}return f(b,a),g(b,[{key:"draw",value:function(a){this.drawConversationTextArea(a),this.drawBadge(a),this.drawConversation(a)}},{key:"drawConversationTextArea",value:function(a){a.save(),a.rect(0,k.canvasProperties.height-k.interactionTextArea.height,k.interactionTextArea.width,k.interactionTextArea.height),a.fillStyle=k.interactionTextArea.colour,a.globalAlpha=k.interactionTextArea.alpha,a.fill(),a.restore()}},{key:"drawBadge",value:function(a){a.font=k.fonts.large,a.fillStyle=k.colours.white,a.fillText(this.person.name,k.interactionTextArea.badgeOffsetX,k.canvasProperties.height-k.interactionTextArea.height+k.interactionTextArea.badgeOffsetY)}},{key:"drawConversation",value:function(a){var b=k.canvasProperties.height-k.interactionTextArea.height+3*k.interactionTextArea.badgeOffsetY;a.font=k.fonts.small,a.fillStyle=k.colours.white,this.lines.forEach(function(c,d){a.fillText(c,k.interactionTextArea.badgeOffsetX,b+d*k.interactionTextArea.lineHeight)})}},{key:"returnToWorldMap",value:function(){this.worldMap&&this.game.setScene(this.worldMap)}}]),b}(j.Scene);c.Interaction=l},{"../constants":1,"./scene":10,"./util":12}],5:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.Item=void 0;var e=a("./util"),f=(function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a}(e),a("../constants")),g=function a(b,c){d(this,a),this.name=b,this.description=c,this.colour=f.colours.black};c.Item=g},{"../constants":1,"./util":12}],6:[function(a,b,c){"use strict";function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.Inhabitance=c.Interior=c.Locale=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./util"),i=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(h),j=a("../constants"),k=function(){function a(b,c){f(this,a),this.player=b,this.people=c,this.entryPoints={},this.spawnPoints=[],this.inhabitances=[]}return g(a,[{key:"initialise",value:function(a,b){for(var c=[],d=[],e=[],f=0;f<a;f++){c.push([]),d.push([]),e.push([]);for(var g=0;g<b;g++)c[f].push(["Blank"]),d[f].push(!1),e[f].push(!1)}this.map=c,this.encounters=d,this.entrances=e,this.width=a,this.height=b}},{key:"terrainPaint",value:function(a,b,c,d,e){for(var f=a;f<a+c;f++)for(var g=b;g<b+d;g++)this.map[f][g]=e}},{key:"randomEncounterPatch",value:function(a,b,c,d,e,f){for(var g=a;g<a+c;g++)for(var h=b;h<b+d;h++)this.encounters[g][h]={rate:e,enemies:f}}},{key:"addInhabitance",value:function(a,b,c,d,e){var f=e.doorway;this.terrainPaint(a,b,c,d,"Wall"),this.terrainPaint(f.x,f.y,1,1,"Doorway"),this.entrances[f.x][f.y]={locale:e,entryPoint:"frontDoor"}}},{key:"enterLocaleAt",value:function(a){this.player.setPlacement(this.entryPoints[a].x,this.entryPoints[a].y)}},{key:"drawInhabitances",value:function(){for(var a=0;a<this.inhabitances.length;a++){var b=this.inhabitances[a];this.addInhabitance(b.x,b.y,j.inhabitanceSize,j.inhabitanceSize,b)}}},{key:"assignPeopleToInhabitances",value:function(){if(0!==this.inhabitances.length&&0!==this.people.length)for(var a=0;a<this.people.length;a++){var b=this.people[a],c=Math.floor(Math.random()*this.inhabitances.length),d=this.inhabitances[c];d.addInhabitant(b)}}}]),a}(),l=function(a){function b(a,c,e){f(this,b);var g=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));g.inhabitance=e,i.log("Welcome to "+e.name+".");for(var h=0;h<e.inhabitants.length;h++){var j=e.inhabitants[h];i.log(j+" lives here.")}return g}return e(b,a),b}(k),m=function(){function a(b,c,d,e,g){f(this,a),this.id=b,this.name=c,this.x=d,this.y=e,this.doorway=g,this.inhabitants=[]}return g(a,[{key:"addInhabitant",value:function(a){this.inhabitants.push(a)}}]),a}();c.Locale=k,c.Interior=l,c.Inhabitance=m},{"../constants":1,"./util":12}],7:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.choosePeople=void 0;var d=a("../constants"),e=a("./util"),f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(e),g=a("../people/people");c.choosePeople=function(){var a=[];f.log("Choosing "+d.personCount+" people...");for(var b=void 0;a.length<d.personCount;)b=f.pickRandomProperty(g.people),-1===a.indexOf(b)&&(a.push(b),f.log(b+" has been chosen."));return a}},{"../constants":1,"../people/people":39,"./util":12}],8:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.Person=void 0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("./util"),g=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(f),h=a("../constants"),i=function(){function a(b,c){d(this,a),this.id=b,this.name=b,this.gender=c,this.colour=h.colours.black,this.relationships={}}return e(a,[{key:"randomizeRelationships",value:function(){var a=this;Object.keys(this.relationships).forEach(function(b){var c=a.relationships[b],d=c.value,e=Math.floor(99*Math.random());g.log(a.name+"'s relationship with "+h.posessivePronouns[a.gender]+" "+c.description+", "+b+", goes from "+d+" to "+e+"."),a.relationships[b].value=e})}},{key:"addAcquaintanceRelationship",value:function(a){this.relationships[a]={description:"Acquaintance",value:50}}}]),a}();c.Person=i},{"../constants":1,"./util":12}],9:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.Player=void 0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("../constants"),g=function(){function a(){d(this,a),this.colour=f.colours.black,this.direction=f.directions.down}return e(a,[{key:"setPlacement",value:function(a,b){this.x=a,this.y=b}}]),a}();c.Player=g},{"../constants":1}],10:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.Scene=void 0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=(a("../constants"),function(){function a(){d(this,a),this.actions={up:this.empty,down:this.empty,left:this.empty,right:this.empty,action:this.empty,back:this.empty}}return e(a,[{key:"empty",value:function(){return null}},{key:"doActions",value:function(a){this.game&&a&&(this.game.triggerActionTimeout(),this.actions[a]())}},{key:"draw",value:function(a){}},{key:"setGame",value:function(a){this.game=a}}]),a}());c.Scene=f},{"../constants":1}],11:[function(a,b,c){"use strict";function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.WoodenFloor=c.Doorway=c.Wall=c.Road=c.Water=c.Grass=c.Blank=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("../constants"),i=function(){function a(){f(this,a),this.encounters=[]}return g(a,[{key:"isPassable",value:function(){return this.passable}},{key:"hasEncounters",value:function(){return this.encounters}}]),a}(),j=function(a){function b(){f(this,b);var a=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.passable=!1,a.colour=h.colours.black,a}return e(b,a),b}(i),k=function(a){function b(){f(this,b);var a=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.passable=!0,a.colour=h.colours.green,a}return e(b,a),b}(i),l=function(a){function b(){f(this,b);var a=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.passable=!1,a.colour=h.colours.blue,a}return e(b,a),b}(i),m=function(a){function b(){f(this,b);var a=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.passable=!0,a.colour=h.colours.grey,a}return e(b,a),b}(i),n=function(a){function b(){f(this,b);var a=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.passable=!1,a.colour=h.colours.brown,a}return e(b,a),b}(i),o=function(a){function b(){f(this,b);var a=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.passable=!0,a.colour=h.colours.darkbrown,a}return e(b,a),b}(i),p=function(a){function b(){f(this,b);var a=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.passable=!0,a.colour=h.colours.darkbrown,a}return e(b,a),b}(i);c.Blank=j,c.Grass=k,c.Water=l,c.Road=m,c.Wall=n,c.Doorway=o,c.WoodenFloor=p},{"../constants":1}],12:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.dieRoll=function(a){return Math.floor(Math.random()*a)},c.pickRandomProperty=function(a){var b=void 0,c=0;for(var d in a)Math.random()<1/++c&&(b=d);return b},c.log=function(a){var b=document.getElementById("log");b.innerHTML+=a+"<hr/>",b.scrollTop=b.scrollHeight},c.clearLog=function(){document.getElementById("log").innerHTML=""}},{}],13:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.WorldMap=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},i=a("./terrain"),j=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(i),k=a("../constants"),l=a("./scene"),m=a("./interaction"),n=a("../locales/locales"),o=a("../people/people"),p=function(a){function b(a){d(this,b);var c=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.player=a,c.actions.up=c.moveUp.bind(c),c.actions.down=c.moveDown.bind(c),c.actions.left=c.moveLeft.bind(c),c.actions.right=c.moveRight.bind(c),c.actions.action=c.checkForInteraction.bind(c),c.visitedLocales={},c.presentPeople=[],c}return f(b,a),g(b,[{key:"doActions",value:function(a){h(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"doActions",this).call(this,a),a&&(this.checkForRandomEncounters(),this.checkForEntrance())}},{key:"moveUp",value:function(){this.localeMap[this.player.x][this.player.y-1].isPassable()&&this.player.setPlacement(this.player.x,this.player.y-1),this.player.direction=k.directions.up}},{key:"moveDown",value:function(){this.localeMap[this.player.x][this.player.y+1].isPassable()&&this.player.setPlacement(this.player.x,this.player.y+1),this.player.direction=k.directions.down}},{key:"moveLeft",value:function(){this.localeMap[this.player.x-1][this.player.y].isPassable()&&this.player.setPlacement(this.player.x-1,this.player.y),this.player.direction=k.directions.left}},{key:"moveRight",value:function(){this.localeMap[this.player.x+1][this.player.y].isPassable()&&this.player.setPlacement(this.player.x+1,this.player.y),this.player.direction=k.directions.right}},{key:"draw",value:function(a){this.offsetX=this.player.x*k.tileSize-this.game.centerPoint.x,this.offsetY=this.player.y*k.tileSize-this.game.centerPoint.y,this.viewportStartX=this.player.x-k.tilesWide/2,this.viewportStartY=this.player.y-k.tilesHigh/2,this.drawLocale(a),this.drawPlayer(a),this.drawPeople(a)}},{key:"drawPlayer",value:function(a){a.beginPath(),a.rect(this.game.centerPoint.x,this.game.centerPoint.y,k.tileSize,k.tileSize),a.fillStyle=this.player.colour,a.fill()}},{key:"drawLocale",value:function(a){if(this.locale){var b=this.viewportStartX,c=this.viewportStartY;b<0&&(b=0),c<0&&(c=0),b>=this.locale.width&&(b=this.locale.width),c>=this.locale.height&&(c=this.locale.height);for(var d=b;d<=b+k.tilesWide;d++)for(var e=c;e<=c+k.tilesHigh;e++){var f=this.localeMap[d][e];a.beginPath(),a.fillStyle=f.colour,a.strokeStyle=f.colour,a.rect(d*k.tileSize-this.offsetX,e*k.tileSize-this.offsetY,k.tileSize,k.tileSize),a.fill(),a.stroke()}}}},{key:"drawPeople",value:function(a){var b=this;0!==this.presentPeople.length&&this.presentPeople.forEach(function(c){a.beginPath(),a.rect(c.x*k.tileSize-b.offsetX,c.y*k.tileSize-b.offsetY,k.tileSize,k.tileSize),a.strokeStyle=c.colour,a.fillStyle=c.colour,a.fill(),a.stroke(),b.localeMap[c.x][c.y].passable=!1,b.localeMap[c.x][c.y].person=c})}},{key:"checkForRandomEncounters",value:function(){var a=this.locale.encounters[this.player.x][this.player.y];if(a){Math.ceil(Math.random()*a.rate)===a.rate&&this.startRandomEncounter(a.enemies)}}},{key:"startRandomEncounter",value:function(a){this.game.setScene(new Encounter(a))}},{key:"checkForInteraction",value:function(){var a=this.player.x,b=this.player.y;switch(this.player.direction){case"up":b--;break;case"down":b++;break;case"left":a--;break;case"right":a++}this.localeMap[a][b].person&&this.startInteraction(this.localeMap[a][b].person)}},{key:"startInteraction",value:function(a){var b=new m.Interaction(a);b.worldMap=this,this.game.setScene(b)}},{key:"checkForEntrance",value:function(){var a=this.locale.entrances[this.player.x][this.player.y];a&&this.enter(a)}},{key:"enter",value:function(a){if(this.presentPeople=[],void 0!==this.visitedLocales[a.locale.id])return void this.setCurrentLocale(this.visitedLocales[a.locale.id],a.entryPoint,!1);var b=n.locales[a.locale.id],c=new b(this.locale.player,this.locale.people,a.locale);this.setCurrentLocale(c,a.entryPoint)}},{key:"spawnPeople",value:function(){var a=this;void 0!==this.locale.inhabitance&&this.locale.inhabitance.inhabitants.forEach(function(b,c){var d=a.locale.spawnPoints[c];if(void 0!==d){var e=new o.people[b];e.x=d.x,e.y=d.y,a.presentPeople.push(e)}})}},{key:"setCurrentLocale",value:function(a,b){var c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.visitedLocales[a.id]=a,this.locale=a,this.localeMap=a.map,a.enterLocaleAt(b),c&&this.rasterizeLocaleMap(),this.spawnPeople()}},{key:"rasterizeLocaleMap",value:function(){if(this.locale)for(var a=0;a<this.locale.width;a++)for(var b=0;b<this.locale.height;b++){var c=this.locale.map[a][b];this.localeMap[a][b]=new j[c]}}}]),b}(l.Scene);c.WorldMap=p},{"../constants":1,"../locales/locales":27,"../people/people":39,"./interaction":4,"./scene":10,"./terrain":11}],14:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Evidence=void 0;var g=a("../engine/util"),h=(function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a}(g),a("../engine/item")),i=function(a){function b(a,c,f,g){d(this,b);var h=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return h.incriminates=f,h.location=g,h}return f(b,a),b}(h.Item);c.Evidence=i},{"../engine/item":5,"../engine/util":12}],15:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.chooseEvidence=void 0;var d=a("../engine/util"),e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(d),f=a("./murderweapons"),g=(c.chooseEvidence=function(a){var b=[],c=g(a);return c&&b.push(c),b},function(a){var b=null,c=a.scene.locale.inhabitances,g=a.murderer,h=(0,d.dieRoll)(c.length-1);switch(0===e.dieRoll(10)&&(g=!1),e.dieRoll(3)){case 0:b=new f.murderWeapons[a.weapon](g,a.victim);break;case 1:c.forEach(function(b,c){-1!==b.inhabitants.indexOf(a.murderer)&&(h=c)}),b=new f.murderWeapons[a.weapon](g,a.scene.locale.inhabitances[h].id);break;case 2:b=new f.murderWeapons[a.weapon](g,a.scene.locale.inhabitances[h].id)}return b})},{"../engine/util":12,"./murderweapons":19}],16:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Handgun=void 0;var g=a("./murderweapon"),h=function(a){function b(a,c){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,"Handgun","a handgun, still warm from the recent shot",a,c))}return f(b,a),b}(g.MurderWeapon);c.Handgun=h},{"./murderweapon":18}],17:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Knife=void 0;var g=a("./murderweapon"),h=function(a){function b(a,c){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,"Knife","a blood-stained kitchen knife",a,c))}return f(b,a),b}(g.MurderWeapon);c.Knife=h},{"./murderweapon":18}],18:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.MurderWeapon=void 0;var g=a("./evidence"),h=function(a){function b(a,c,f,g){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c,f,g))}return f(b,a),b}(g.Evidence);c.MurderWeapon=h},{"./evidence":14}],19:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.chooseMurderWeapon=c.murderWeapons=void 0;var d=a("../engine/util"),e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(d),f=a("./knife"),g=a("./spoon"),h=a("./handgun"),i=c.murderWeapons={Knife:f.Knife,Spoon:g.Spoon,Handgun:h.Handgun};c.chooseMurderWeapon=function(){var a=e.pickRandomProperty(i);return e.log("The murder weapon is a "+a+"."),a}},{"../engine/util":12,"./handgun":16,"./knife":17,"./spoon":20}],20:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Spoon=void 0;var g=a("./murderweapon"),h=function(a){function b(a,c){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,"Spoon","a jagged rusty spoon",a,c))}return f(b,a),b}(g.MurderWeapon);c.Spoon=h},{"./murderweapon":18}],21:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.GroveStreet1=void 0;var g=a("../islands"),h=a("./grovestreethouse"),i=function(a){function b(a,c,f){d(this,b);var h=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c,f));return h.id="GroveStreet1",h.entryPoints.frontDoor={x:48,y:48},h.entrances[49][48]={locale:new g.Islands(a,c),entryPoint:"groveStreet1"},h.terrainPaint(49,48,1,1,"WoodenFloor"),h}return f(b,a),b}(h.GroveStreetTemplate);c.GroveStreet1=i},{"../islands":26,"./grovestreethouse":25}],22:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.GroveStreet2=void 0;var g=a("../islands"),h=a("./grovestreethouse"),i=function(a){function b(a,c,f){d(this,b);var h=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c,f));return h.id="GroveStreet2",h.entryPoints.frontDoor={x:26,y:48},h.entrances[25][48]={locale:new g.Islands(a,c),entryPoint:"groveStreet2"},h.terrainPaint(25,48,1,1,"WoodenFloor"),h}return f(b,a),b}(h.GroveStreetTemplate);c.GroveStreet2=i},{"../islands":26,"./grovestreethouse":25}],23:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.GroveStreet3=void 0;var g=a("../islands"),h=a("./grovestreethouse"),i=function(a){function b(a,c,f){d(this,b);var h=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c,f));return h.id="GroveStreet3",h.entryPoints.frontDoor={x:48,y:48},h.entrances[49][48]={locale:new g.Islands(a,c),entryPoint:"groveStreet3"},h.terrainPaint(49,48,1,1,"WoodenFloor"),h}return f(b,a),b}(h.GroveStreetTemplate);c.GroveStreet3=i},{"../islands":26,"./grovestreethouse":25}],24:[function(a,b,c){"use strict";function d(a,b){
if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.GroveStreet4=void 0;var g=a("../islands"),h=a("./grovestreethouse"),i=function(a){function b(a,c,f){d(this,b);var h=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c,f));return h.id="GroveStreet4",h.entryPoints.frontDoor={x:26,y:48},h.entrances[25][48]={locale:new g.Islands(a,c),entryPoint:"groveStreet4"},h.terrainPaint(25,48,1,1,"WoodenFloor"),h}return f(b,a),b}(h.GroveStreetTemplate);c.GroveStreet4=i},{"../islands":26,"./grovestreethouse":25}],25:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.GroveStreetTemplate=void 0;var g=a("../../paradise_locale"),h=function(a){function b(a,c,f){d(this,b);var g=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c,f));return g.initialise(100,100),g.spawnPoints.push({x:33,y:35}),g.spawnPoints.push({x:39,y:36}),g.spawnPoints.push({x:45,y:32}),g.spawnPoints.push({x:28,y:33}),g.terrainPaint(0,0,100,100,"Blank"),g.terrainPaint(25,25,25,25,"Wall"),g.terrainPaint(26,26,11,23,"WoodenFloor"),g.terrainPaint(38,26,11,23,"WoodenFloor"),g.terrainPaint(37,37,1,1,"WoodenFloor"),g}return f(b,a),b}(g.ParadiseInterior);c.GroveStreetTemplate=h},{"../../paradise_locale":31}],26:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Islands=void 0;var g=a("../engine/locale"),h=a("../paradise_locale"),i=function(a){function b(a,c){d(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return f.id="Islands",f.entryPoints.beginningOfGame={x:56,y:57},f.entryPoints.groveStreet1={x:55,y:60},f.entryPoints.groveStreet2={x:58,y:60},f.entryPoints.groveStreet3={x:55,y:63},f.entryPoints.groveStreet4={x:58,y:63},f.initialise(300,300),f.terrainPaint(0,0,300,300,"Water"),f.terrainPaint(52,57,10,20,"Grass"),f.terrainPaint(42,35,2,8,"Grass"),f.terrainPaint(56,57,2,20,"Road"),f.terrainPaint(55,60,1,1,"Road"),f.terrainPaint(58,60,1,1,"Road"),f.terrainPaint(55,63,1,1,"Road"),f.terrainPaint(58,63,1,1,"Road"),f.inhabitances.push(new g.Inhabitance("GroveStreet1","1 Grove Street",53,59,{x:54,y:60}),new g.Inhabitance("GroveStreet2","2 Grove Street",59,59,{x:59,y:60}),new g.Inhabitance("GroveStreet3","3 Grove Street",53,62,{x:54,y:63}),new g.Inhabitance("GroveStreet4","4 Grove Street",59,62,{x:59,y:63})),f.drawInhabitances(),f.assignPeopleToInhabitances(),f}return f(b,a),b}(h.ParadiseLocale);c.Islands=i},{"../engine/locale":6,"../paradise_locale":31}],27:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.chooseStartingMap=c.locales=c.startingMaps=void 0;var d=a("../engine/util"),e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(d),f=a("./village"),g=a("./islands"),h=a("./interiors/1grovestreet"),i=a("./interiors/2grovestreet"),j=a("./interiors/3grovestreet"),k=a("./interiors/4grovestreet"),l=c.startingMaps={Village:f.Village,Islands:g.Islands};c.locales={Village:f.Village,Islands:g.Islands,GroveStreet1:h.GroveStreet1,GroveStreet2:i.GroveStreet2,GroveStreet3:j.GroveStreet3,GroveStreet4:k.GroveStreet4},c.chooseStartingMap=function(){var a=e.pickRandomProperty(l);return e.log("Choosing starting map..."),e.log("Map is "+a+"."),a}},{"../engine/util":12,"./interiors/1grovestreet":21,"./interiors/2grovestreet":22,"./interiors/3grovestreet":23,"./interiors/4grovestreet":24,"./islands":26,"./village":28}],28:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Village=void 0;var g=a("../paradise_locale"),h=function(a){function b(a,c){d(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return f.entryPoints.beginningOfGame={x:30,y:30},f.initialise(300,300),f.terrainPaint(0,0,300,300,"Water"),f.terrainPaint(20,27,15,90,"Grass"),f.terrainPaint(35,35,2,40,"Grass"),f.terrainPaint(37,37,2,36,"Grass"),f.terrainPaint(39,39,2,32,"Grass"),f}return f(b,a),b}(g.ParadiseLocale);c.Village=h},{"../paradise_locale":31}],29:[function(a,b,c){"use strict";var d=a("./engine/util"),e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(d),f=a("./engine/game"),g=a("./engine/player"),h=a("./paradise_worldmap"),i=a("./people/people"),j=a("./engine/people"),k=a("./locales/locales"),l=a("./evidence/evidences"),m=a("./evidence/murderweapons");window.startGame=function(a,b,c,d,n){e.clearLog(),a=k.startingMaps[a]||k.startingMaps[(0,k.chooseStartingMap)()],b=b||(0,j.choosePeople)();var o=new g.Player,p=new h.ParadiseWorldMap(o);window.game=(0,f.StartGame)(a,b,o,p),window.game.victim=c||(0,i.chooseVictim)(b),window.game.murderer=d||(0,i.chooseMurderer)(c,b),window.game.weapon=n||(0,m.chooseMurderWeapon)(),window.game.evidence=(0,l.chooseEvidence)(game),e.log("Evidence includes:"),window.game.evidence.forEach(function(a){e.log("-  "+a.name+" ("+a.location+")")}),document.querySelectorAll("button").forEach(function(a){a.blur()})}},{"./engine/game":2,"./engine/people":7,"./engine/player":9,"./engine/util":12,"./evidence/evidences":15,"./evidence/murderweapons":19,"./locales/locales":27,"./paradise_worldmap":33,"./people/people":39}],30:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.ParadiseInteraction=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},i=a("./engine/util"),j=(function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a}(i),a("./constants")),k=a("./engine/interaction"),l=function(a){function b(a,c){d(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));if(f.game=c,f.person.victim){var g=[],h=f.person,i=f.game.weapon;g.push(h.name+" is dead."),h.evidence.forEach(function(a){a.name===i&&g.push("Lying next to "+j.pronouns[h.gender]+" is "+a.description+".")});for(var k=0;k<g.length;k++)f.lines.push(g[k])}return f}return f(b,a),g(b,[{key:"drawBadge",value:function(a){h(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"drawBadge",this).call(this,a),this.person.victim&&(a.font=j.fonts.death,a.fillStyle=j.colours.red,a.fillText(j.texts.dead,j.interactionTextArea.badgeOffsetX,j.canvasProperties.height-j.interactionTextArea.height+2*j.interactionTextArea.badgeOffsetY))}},{key:"returnToWorldMap",value:function(){this.worldMap&&this.game.setScene(this.worldMap)}}]),b}(k.Interaction);c.ParadiseInteraction=l},{"./constants":1,"./engine/interaction":4,"./engine/util":12}],31:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.ParadiseLocale=c.ParadiseInterior=void 0;var g=a("./engine/util"),h=(function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a}(g),a("./engine/locale")),i=function(a){function b(a,c){d(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return f.evidence=[],f}return f(b,a),b}(h.Locale),j=function(a){function b(a,c,f){d(this,b);var g=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c,f));return g.evidence=[],g}return f(b,a),b}(h.Interior);c.ParadiseInterior=j,c.ParadiseLocale=i},{"./engine/locale":6,"./engine/util":12}],32:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.ParadisePerson=void 0;var g=a("./engine/util"),h=(function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a}(g),a("./engine/person")),i=function(a){function b(a,c){d(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return f.evidence=[],f}return f(b,a),b}(h.Person);c.ParadisePerson=i},{"./engine/person":8,"./engine/util":12}],33:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.ParadiseWorldMap=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./engine/worldmap"),i=a("./people/people"),j=a("./paradise_interaction"),k=a("./engine/util"),l=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(k),m=function(a){function b(a){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return f(b,a),g(b,[{key:"spawnPeople",value:function(){var a=this;void 0!==this.locale.inhabitance&&(this.locale.inhabitance.inhabitants.forEach(function(b,c){var d=a.locale.spawnPoints[c];if(void 0!==d){var e=new i.people[b];e.x=d.x,e.y=d.y,e.name===a.game.victim&&(e.victim=!0),e.name===a.game.murderer&&(e.murderer=!0),a.plantEvidence(e),a.presentPeople.push(e)}}),this.plantEvidence(this.locale))}},{key:"startInteraction",value:function(a){var b=new j.ParadiseInteraction(a,this.game);b.worldMap=this,this.game.setScene(b)}},{key:"plantEvidence",value:function(a){this.game.evidence.forEach(function(b){a.id===b.location&&(a.evidence.push(b),l.log(b.name+" is hidden here!"))})}}]),b}(h.WorldMap);c.ParadiseWorldMap=m},{"./engine/util":12,"./engine/worldmap":13,"./paradise_interaction":30,"./people/people":39}],34:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Evelyn=void 0;var g=a("../constants"),h=a("../paradise_person"),i=function(a){function b(){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,"Evelyn",g.genders.female))}return f(b,a),b}(h.ParadisePerson);c.Evelyn=i},{"../constants":1,"../paradise_person":32}],35:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Jill=void 0;var g=a("../constants"),h=a("../paradise_person"),i=function(a){function b(){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,"Jill",g.genders.female))}return f(b,a),b}(h.ParadisePerson);c.Jill=i},{"../constants":1,"../paradise_person":32}],36:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.John=void 0;var g=a("../constants"),h=a("../paradise_person"),i=function(a){function b(){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,"John",g.genders.male))}return f(b,a),b}(h.ParadisePerson);c.John=i},{"../constants":1,"../paradise_person":32}],37:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Neil=void 0;var g=a("../constants"),h=a("../paradise_person"),i=function(a){function b(){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,"Neil",g.genders.male))}return f(b,a),b}(h.ParadisePerson);c.Neil=i},{"../constants":1,"../paradise_person":32}],38:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Pauline=void 0;var g=a("../constants"),h=a("../paradise_person"),i=function(a){function b(){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,"Pauline",g.genders.female))}return f(b,a),b}(h.ParadisePerson);c.Pauline=i},{"../constants":1,"../paradise_person":32}],39:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.chooseMurderer=c.chooseVictim=c.people=void 0;var d=a("../engine/util"),e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(d),f=a("../constants"),g=a("./evelyn"),h=a("./jill"),i=a("./john"),j=a("./neil"),k=a("./pauline"),l=a("./petey"),m=a("./quazar"),n=a("./zenith"),o=c.people={Evelyn:g.Evelyn,Jill:h.Jill,John:i.John,Neil:j.Neil,Pauline:k.Pauline,Petey:l.Petey,Quazar:m.Quazar,Zenith:n.Zenith};c.chooseVictim=function(a){var b=e.dieRoll(a.length-1);return e.log(b+" is the unlucky one."),b},c.chooseMurderer=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=new o[a];b.forEach(function(a){d.name!==a.name&&(a in d.relationships||d.addAcquaintanceRelationship(a))}),c&&v.randomizeRelationships();for(var g=null,h=null;null===g;)Object.keys(d.relationships).forEach(function(a){if(null===g&&a!==d.name){h=d.relationships[a];var b=100-h.value;Math.floor(100*Math.random())<b&&(g=a)}});return e.log(d.name+"'s murderer is "+f.posessivePronouns[d.gender]+" "+h.description+", "+g+"!!!"),g}},{"../constants":1,"../engine/util":12,"./evelyn":34,"./jill":35,"./john":36,"./neil":37,"./pauline":38,"./petey":40,"./quazar":41,"./zenith":42}],40:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Petey=void 0;var g=a("../constants"),h=a("../paradise_person"),i=function(a){function b(){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,"Petey",g.genders.male))}return f(b,a),b}(h.ParadisePerson);c.Petey=i},{"../constants":1,"../paradise_person":32}],41:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Quazar=void 0;var g=a("../constants"),h=a("../paradise_person"),i=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,"Quazar",g.genders.alien));return a.colour=g.colours.green,a.relationships={Zenith:{description:"Brother",value:85}},a}return f(b,a),b}(h.ParadisePerson);c.Quazar=i},{"../constants":1,"../paradise_person":32}],42:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.Zenith=void 0;var g=a("../constants"),h=a("../paradise_person"),i=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,"Zenith",g.genders.alien));return a.colours=g.colours.green,a.relationships={Quazar:{description:"Brother",value:85}},a}return f(b,a),b}(h.ParadisePerson);c.Zenith=i},{"../constants":1,"../paradise_person":32}]},{},[1,30,31,32,33,29]);